<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡§á‡§Ç‡§∏‡•ç‡§ü‡•á‡§Ç‡§ü ‡§Æ‡•à‡§ï‡•á‡§®‡§ø‡§ï - ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§µ‡§ø‡§µ‡§∞‡§£</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@300;400;500;600;700;800;900&family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #2E7D32;
      --primary-light: #4CAF50;
      --primary-dark: #1B5E20;
      --secondary-color: #FF6B35;
      --accent-color: #FFA726;
      --success-color: #00C853;
      --danger-color: #D32F2F;
      --warning-color: #FF9800;
      --background: #F8F9FA;
      --surface: #FFFFFF;
      --text-primary: #212121;
      --text-secondary: #757575;
      --text-hint: #BDBDBD;
      --shadow: rgba(0,0,0,0.12);
      --shadow-dark: rgba(0,0,0,0.24);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans Devanagari', 'Poppins', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    /* Animated background elements */
    .bg-decoration {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .bg-decoration::before {
      content: '';
      position: absolute;
      width: 200px;
      height: 200px;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      border-radius: 50%;
      top: 10%;
      left: 80%;
      animation: float 6s ease-in-out infinite;
    }

    .bg-decoration::after {
      content: '';
      position: absolute;
      width: 150px;
      height: 150px;
      background: radial-gradient(circle, rgba(255,255,255,0.08) 0%, transparent 70%);
      border-radius: 50%;
      bottom: 20%;
      left: 10%;
      animation: float 8s ease-in-out infinite reverse;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(180deg); }
    }

    .container {
      max-width: 420px;
      margin: 0 auto;
      background: var(--surface);
      border-radius: 24px 24px 0 0;
      min-height: 100vh;
      box-shadow: 0 -10px 40px var(--shadow-dark);
      position: relative;
      z-index: 1;
      overflow: hidden;
      animation: slideUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes slideUp {
      from {
        transform: translateY(100px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .header {
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);
      color: white;
      padding: 40px 24px 32px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 10px,
        rgba(255,255,255,0.03) 10px,
        rgba(255,255,255,0.03) 20px
      );
      animation: shimmer 20s linear infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
      100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }

    .map-button {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255,255,255,0.25);
      border: 2px solid rgba(255,255,255,0.4);
      color: white;
      padding: 10px 16px;
      border-radius: 50px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      backdrop-filter: blur(20px);
      z-index: 2;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    }

    .map-button:hover {
      background: rgba(255,255,255,0.35);
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 8px 24px rgba(0,0,0,0.2);
    }

    .header h1 {
      font-size: 32px;
      font-weight: 800;
      margin-bottom: 8px;
      position: relative;
      z-index: 1;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .header p {
      font-size: 16px;
      opacity: 0.9;
      position: relative;
      z-index: 1;
      font-weight: 500;
    }

    .booking-id {
      background: rgba(255,255,255,0.25);
      padding: 12px 20px;
      border-radius: 50px;
      display: inline-block;
      margin-top: 20px;
      font-weight: 600;
      position: relative;
      z-index: 1;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.3);
      font-size: 16px;
    }

    .content {
      padding: 32px 24px 120px;
      background: var(--surface);
    }

    .detail-section {
      margin-bottom: 32px;
    }

    .detail-row {
      display: flex;
      align-items: flex-start;
      margin-bottom: 20px;
      padding: 20px;
      background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
      border-radius: 16px;
      border: 1px solid rgba(0,0,0,0.06);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .detail-row::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      width: 4px;
      height: 100%;
      background: linear-gradient(180deg, var(--primary-color), var(--primary-light));
      transform: scaleY(0);
      transition: transform 0.3s ease;
    }

    .detail-row:hover {
      transform: translateX(8px);
      box-shadow: 0 8px 32px rgba(0,0,0,0.12);
      border-color: var(--primary-light);
    }

    .detail-row:hover::before {
      transform: scaleY(1);
    }

    .detail-icon {
      width: 48px;
      height: 48px;
      margin-right: 16px;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      flex-shrink: 0;
      box-shadow: 0 4px 16px rgba(46, 125, 50, 0.3);
    }

    .detail-content {
      flex: 1;
      min-width: 0;
    }

    .detail-label {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 6px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .detail-value {
      font-size: 18px;
      color: var(--text-primary);
      font-weight: 600;
      line-height: 1.4;
      word-wrap: break-word;
    }

    .location-link {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 700;
      transition: color 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .location-link:hover {
      color: var(--primary-dark);
      text-decoration: underline;
    }

    .status-badge {
      display: inline-block;
      padding: 8px 16px;
      border-radius: 50px;
      font-size: 14px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .status-active {
      background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
      color: var(--primary-dark);
      border: 2px solid var(--success-color);
    }

    .status-cancelled {
      background: linear-gradient(135deg, #ffebee, #ffcdd2);
      color: var(--danger-color);
      border: 2px solid var(--danger-color);
    }

    .payment-info {
      background: linear-gradient(135deg, #e3f2fd 0%, #f1f8e9 100%);
      padding: 24px;
      border-radius: 20px;
      margin: 24px 0;
      border: 2px solid rgba(76, 175, 80, 0.2);
      position: relative;
      overflow: hidden;
    }

    .payment-info::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-color), var(--accent-color), var(--primary-color));
      background-size: 200% 100%;
      animation: gradient 3s ease infinite;
    }

    @keyframes gradient {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .payment-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      font-size: 18px;
      font-weight: 500;
    }

    .payment-row:last-child {
      margin-bottom: 0;
      border-top: 3px solid var(--primary-color);
      padding-top: 16px;
      font-weight: 800;
      font-size: 20px;
      color: var(--primary-dark);
    }

    /* Fixed bottom action area */
    .action-area {
      position: fixed;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 420px;
      background: var(--surface);
      padding: 20px 24px 24px;
      border-top: 1px solid rgba(0,0,0,0.08);
      z-index: 100;
      box-shadow: 0 -8px 32px rgba(0,0,0,0.12);
    }

    /* Slide to Accept */
    .slide-container {
      position: relative;
      width: 100%;
      height: 64px;
      background: linear-gradient(135deg, var(--success-color) 0%, #00E676 100%);
      border-radius: 32px;
      margin-bottom: 16px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0, 200, 83, 0.3);
      user-select: none;
    }

    .slide-track {
      position: absolute;
      top: 4px;
      left: 4px;
      right: 4px;
      bottom: 4px;
      background: rgba(255,255,255,0.2);
      border-radius: 28px;
      overflow: hidden;
    }

    .slide-progress {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      background: linear-gradient(90deg, rgba(255,255,255,0.3), rgba(255,255,255,0.4));
      border-radius: 28px;
      width: 0%;
      transition: width 0.1s ease;
    }

    .slide-button {
      position: absolute;
      top: 4px;
      left: 4px;
      width: 56px;
      height: 56px;
      background: var(--surface);
      border-radius: 50%;
      cursor: grab;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.2);
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 10;
    }

    .slide-button:active {
      cursor: grabbing;
      transform: scale(1.1);
    }

    .slide-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-weight: 800;
      font-size: 18px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
      pointer-events: none;
      z-index: 5;
    }

    .slide-completed {
      background: linear-gradient(135deg, #4CAF50, #2E7D32) !important;
    }

    .slide-completed .slide-button {
      background: #FFF;
      color: #4CAF50;
    }

    /* Cancel Button */
    .cancel-btn {
      width: 100%;
      padding: 16px 24px;
      background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
      border: 2px solid var(--danger-color);
      border-radius: 16px;
      font-size: 18px;
      font-weight: 700;
      color: var(--danger-color);
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .cancel-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: var(--danger-color);
      transition: all 0.4s ease;
      transform: translate(-50%, -50%);
    }

    .cancel-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 24px rgba(211, 47, 47, 0.3);
      color: white;
    }

    .cancel-btn:hover::before {
      width: 300px;
      height: 300px;
    }

    .cancel-btn span {
      position: relative;
      z-index: 2;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    /* Loading state */
    .loading {
      opacity: 0.7;
      pointer-events: none;
    }

    .loading .slide-button::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      border: 2px solid var(--primary-color);
      border-top: 2px solid transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Success/Error Messages */
    .message {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--surface);
      padding: 16px 24px;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
      z-index: 1000;
      min-width: 300px;
      text-align: center;
      font-weight: 600;
      opacity: 0;
      transform: translateX(-50%) translateY(-20px);
      transition: all 0.3s ease;
    }

    .message.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    .message.success {
      border-left: 4px solid var(--success-color);
      color: var(--success-color);
    }

    .message.error {
      border-left: 4px solid var(--danger-color);
      color: var(--danger-color);
    }

    /* Mobile optimizations */
    @media (max-width: 480px) {
      .container {
        border-radius: 0;
        max-width: 100%;
      }

      .header {
        padding: 50px 20px 28px;
      }

      .content {
        padding: 28px 20px 140px;
      }

      .action-area {
        padding: 16px 20px 20px;
        max-width: 100%;
      }

      .detail-row {
        padding: 16px;
        margin-bottom: 16px;
      }

      .detail-icon {
        width: 40px;
        height: 40px;
        font-size: 18px;
      }
    }

    /* Icons */
    .icon-car::before { content: 'üöó'; }
    .icon-problem::before { content: 'üîß'; }
    .icon-price::before { content: 'üí∞'; }
    .icon-location::before { content: 'üìç'; }
    .icon-agent::before { content: 'üë§'; }
    .icon-status::before { content: 'üìã'; }

    /* Loading skeleton */
    .skeleton {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: loading 1.5s infinite;
      border-radius: 16px;
      height: 80px;
      margin-bottom: 20px;
    }

    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    .error-state {
      text-align: center;
      padding: 40px 20px;
      color: var(--text-secondary);
    }

    .error-state h3 {
      color: var(--danger-color);
      margin-bottom: 16px;
      font-size: 20px;
    }

    .retry-btn {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 16px;
      font-size: 16px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .retry-btn:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
    }

    /* Pulse effect for important elements */
    .pulse {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.4); }
      70% { box-shadow: 0 0 0 10px rgba(76, 175, 80, 0); }
      100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
    }
  </style>
</head>
<body>
  <div class="bg-decoration"></div>
  
  <div class="container">
    <div class="header">
      <a href="#" id="mapButton" class="map-button" target="_blank" style="display: none;">
        üìç ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç
      </a>
      <h1>üîß ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§µ‡§ø‡§µ‡§∞‡§£</h1>
      <p>‡§á‡§Ç‡§∏‡•ç‡§ü‡•á‡§Ç‡§ü ‡§Æ‡•à‡§ï‡•á‡§®‡§ø‡§ï ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏</p>
      <div class="booking-id" id="bookingIdDisplay">‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</div>
    </div>

    <div class="content">
      <div id="loadingContent">
        <div class="skeleton"></div>
        <div class="skeleton"></div>
        <div class="skeleton"></div>
        <div class="skeleton"></div>
      </div>

      <div id="bookingContent" style="display: none;">
        <div class="detail-section">
          <div class="detail-row">
            <div class="detail-icon icon-car"></div>
            <div class="detail-content">
              <div class="detail-label">‡§ó‡§æ‡§°‡§º‡•Ä ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</div>
              <div class="detail-value" id="carDetails">-</div>
            </div>
          </div>

          <div class="detail-row">
            <div class="detail-icon icon-problem"></div>
            <div class="detail-content">
              <div class="detail-label">‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£</div>
              <div class="detail-value" id="problemDetails">-</div>
            </div>
          </div>

          <div class="detail-row">
            <div class="detail-icon icon-location"></div>
            <div class="detail-content">
              <div class="detail-label">‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§≤‡•ã‡§ï‡•á‡§∂‡§®</div>
              <div class="detail-value">
                <a href="#" id="locationLink" class="location-link" target="_blank">
                  üìç ‡§Æ‡•à‡§™ ‡§™‡§∞ ‡§¶‡•á‡§ñ‡•á‡§Ç
                </a>
              </div>
            </div>
          </div>

          <div class="detail-row">
            <div class="detail-icon icon-agent"></div>
            <div class="detail-content">
              <div class="detail-label">‡§è‡§ú‡•á‡§Ç‡§ü ‡§ï‡§æ ‡§®‡§æ‡§Æ</div>
              <div class="detail-value" id="agentDetails">-</div>
            </div>
          </div>

          <div class="detail-row">
            <div class="detail-icon icon-status"></div>
            <div class="detail-content">
              <div class="detail-label">‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§∏‡•ç‡§•‡§ø‡§§‡§ø</div>
              <div class="detail-value">
                <span class="status-badge status-active" id="statusBadge">‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø</span>
              </div>
            </div>
          </div>
        </div>

        <div class="payment-info">
          <div class="payment-row">
            <span>‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§ö‡§æ‡§∞‡•ç‡§ú:</span>
            <span id="serviceCharge">‚Çπ0</span>
          </div>
          <div class="payment-row">
            <span>‡§Ü‡§™‡§ï‡•ã ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ:</span>
            <span id="mechanicPayment">‚Çπ0</span>
          </div>
        </div>
      </div>

      <div id="errorContent" class="error-state" style="display: none;">
        <h3>‚ö†Ô∏è ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø</h3>
        <p>‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•ã‡§° ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§∏‡§ï‡•Ä‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§</p>
        <button class="retry-btn" onclick="loadBookingData()">üîÑ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç</button>
      </div>
    </div>
  </div>

  <!-- Fixed bottom action area -->
  <div class="action-area" id="actionArea" style="display: none;">
    <!-- Slide to Accept -->
    <div class="slide-container pulse" id="slideContainer">
      <div class="slide-track">
        <div class="slide-progress" id="slideProgress"></div>
      </div>
      <div class="slide-button" id="slideButton">
        ‚úÖ
      </div>
      <div class="slide-text" id="slideText">
        ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•ç‡§≤‡§æ‡§á‡§° ‡§ï‡§∞‡•á‡§Ç ‚Üí
      </div>
    </div>

    <!-- Cancel Button -->
    <button class="cancel-btn" id="cancelBtn">
      <span>‚ùå ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</span>
    </button>
  </div>

  <!-- Success/Error Message -->
  <div class="message" id="messageBox"></div>

  <script>
    // Get booking ID from URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const bookingId = urlParams.get('id');

    let bookingData = null;
    let isSliding = false;
    let slideStartX = 0;
    let currentX = 0;
    let slideButton = document.getElementById('slideButton');
    let slideProgress = document.getElementById('slideProgress');
    let slideContainer = document.getElementById('slideContainer');
    let slideText = document.getElementById('slideText');

    // Load booking data when page loads
    document.addEventListener('DOMContentLoaded', function() {
      if (!bookingId) {
        showError('URL ‡§Æ‡•á‡§Ç ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ID ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä');
        return;
      }
      loadBookingData();
      initializeSlideToAccept();
    });

    function loadBookingData() {
      document.getElementById('loadingContent').style.display = 'block';
      document.getElementById('bookingContent').style.display = 'none';
      document.getElementById('errorContent').style.display = 'none';
      document.getElementById('actionArea').style.display = 'none';

      // Simulate API call - replace with actual API endpoint
      fetch(`https://ai.instantmechanic.online/bot/api/bookings/${bookingId}/`)
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          return response.json();
        })
        .then(data => {
          bookingData = data;
          displayBookingData(data);
        })
        .catch(error => {
          console.error('Error loading booking:', error);
          showError('‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤');
        });
    }

    function displayBookingData(data) {
      // Hide loading and show content
      document.getElementById('loadingContent').style.display = 'none';
      document.getElementById('errorContent').style.display = 'none';
      document.getElementById('bookingContent').style.display = 'block';

      // Update booking ID
      document.getElementById('bookingIdDisplay').textContent = `‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó #${data.id || bookingId}`;

      // Update car details
      document.getElementById('carDetails').textContent = data.car || '‡§®‡§ø‡§∞‡•ç‡§¶‡§ø‡§∑‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç';

      // Update problem details
      document.getElementById('problemDetails').textContent = data.problem || '‡§®‡§ø‡§∞‡•ç‡§¶‡§ø‡§∑‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç';

      // Update location
      const locationLink = document.getElementById('locationLink');
      const mapButton = document.getElementById('mapButton');
      
      if (data.location) {
        locationLink.href = data.location;
        locationLink.innerHTML = 'üìç ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç';
        
        // Show and set map button in header
        mapButton.href = data.location;
        mapButton.style.display = 'inline-flex';
      } else {
        locationLink.href = '#';
        locationLink.innerHTML = 'üìç ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç';
        mapButton.style.display = 'none';
      }

      // Update agent details
      document.getElementById('agentDetails').textContent = data.agent_name || '‡§Ö‡§≠‡•Ä ‡§§‡§ï ‡§Ö‡§∏‡§æ‡§á‡§® ‡§®‡§π‡•Ä‡§Ç';

      // Update status and show/hide action buttons
      const statusBadge = document.getElementById('statusBadge');
      const actionArea = document.getElementById('actionArea');
      
      if (data.is_cancelled) {
        statusBadge.textContent = '‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ';
        statusBadge.className = 'status-badge status-cancelled';
        actionArea.style.display = 'none';
      } else {
        statusBadge.textContent = '‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø';
        statusBadge.className = 'status-badge status-active';
        actionArea.style.display = 'block';
      }

      // Update payment info
      document.getElementById('serviceCharge').textContent = `‚Çπ${data.price || 0}`;
      document.getElementById('mechanicPayment').textContent = `‚Çπ${data.pending_payment_amount || 0}`;

      // Add staggered animation to detail rows
      const detailRows = document.querySelectorAll('.detail-row');
      detailRows.forEach((row, index) => {
        row.style.opacity = '0';
        row.style.transform = 'translateX(30px)';
        setTimeout(() => {
          row.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
          row.style.opacity = '1';
          row.style.transform = 'translateX(0)';
        }, index * 100);
      });
    }

    function showError(message) {
      document.getElementById('loadingContent').style.display = 'none';
      document.getElementById('bookingContent').style.display = 'none';
      document.getElementById('actionArea').style.display = 'none';
      document.getElementById('errorContent').style.display = 'block';
      document.querySelector('#errorContent p').textContent = message;
    }

    function showMessage(text, type = 'success') {
      const messageBox = document.getElementById('messageBox');
      messageBox.textContent = text;
      messageBox.className = `message ${type}`;
      messageBox.classList.add('show');
      
      setTimeout(() => {
        messageBox.classList.remove('show');
      }, 3000);
    }

    // Slide to Accept functionality
    function initializeSlideToAccept() {
      const container = slideContainer;
      const button = slideButton;
      const maxSlide = container.offsetWidth - button.offsetWidth - 8; // 8px margin

      // Touch events
      button.addEventListener('touchstart', handleStart, { passive: false });
      button.addEventListener('touchmove', handleMove, { passive: false });
      button.addEventListener('touchend', handleEnd, { passive: false });

      // Mouse events
      button.addEventListener('mousedown', handleStart);
      document.addEventListener('mousemove', handleMove);
      document.addEventListener('mouseup', handleEnd);

      function handleStart(e) {
        e.preventDefault();
        isSliding = true;
        slideStartX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;
        button.style.transition = 'none';
        slideProgress.style.transition = 'none';
        container.classList.remove('pulse');
      }

      function handleMove(e) {
        if (!isSliding) return;
        e.preventDefault();

        currentX = (e.type === 'touchmove' ? e.touches[0].clientX : e.clientX) - slideStartX;
        currentX = Math.max(0, Math.min(currentX, maxSlide));

        const progress = (currentX / maxSlide) * 100;
        
        button.style.transform = `translateX(${currentX}px)`;
        slideProgress.style.width = `${progress}%`;

        // Update text opacity based on progress
        slideText.style.opacity = Math.max(0.3, 1 - (progress / 100));

        // Check if 70% complete
        if (progress >= 70) {
          container.classList.add('slide-completed');
          slideText.textContent = '‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à...';
        } else {
          container.classList.remove('slide-completed');
          slideText.textContent = '‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•ç‡§≤‡§æ‡§á‡§° ‡§ï‡§∞‡•á‡§Ç ‚Üí';
        }
      }

      function handleEnd(e) {
        if (!isSliding) return;
        isSliding = false;

        const progress = (currentX / maxSlide) * 100;

        if (progress >= 70) {
          // Accept booking
          acceptBooking();
        } else {
          // Reset position
          button.style.transition = 'transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
          slideProgress.style.transition = 'width 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
          button.style.transform = 'translateX(0)';
          slideProgress.style.width = '0%';
          slideText.style.opacity = '1';
          slideText.textContent = '‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•ç‡§≤‡§æ‡§á‡§° ‡§ï‡§∞‡•á‡§Ç ‚Üí';
          container.classList.remove('slide-completed');
          
          // Add pulse back after reset
          setTimeout(() => {
            container.classList.add('pulse');
          }, 300);
        }

        currentX = 0;
      }
    }

    function acceptBooking() {
      document.getElementById('actionArea').classList.add('loading');
      slideText.textContent = '‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...';
      
      // Simulate API call
      setTimeout(() => {
        showMessage('‚úÖ ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§ó‡§à! ‡§è‡§ú‡•á‡§Ç‡§ü ‡§ï‡•ã ‡§∏‡•Ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§Ü‡§™ ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§™‡§∞ ‡§ú‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§', 'success');
        document.getElementById('actionArea').style.display = 'none';
        
        // Update status
        const statusBadge = document.getElementById('statusBadge');
        statusBadge.textContent = '‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§ó‡§à';
        statusBadge.className = 'status-badge status-active';
      }, 2000);
    }

    function cancelBooking() {
      if (confirm('‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§á‡§∏ ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§ï‡•ã ‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?\n\n‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ú‡•á‡§Ç‡§ü ‡§ï‡•ã ‡§∏‡•Ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§Ü‡§™ ‡§Ø‡§π ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á‡•§')) {
        document.getElementById('actionArea').classList.add('loading');
        
        // Simulate API call
        setTimeout(() => {
          showMessage('‚ùå ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞ ‡§¶‡•Ä ‡§ó‡§à‡•§ ‡§è‡§ú‡•á‡§Ç‡§ü ‡§ï‡•ã ‡§∏‡•Ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§Ü‡§™ ‡§Ø‡§π ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á‡•§', 'error');
          document.getElementById('actionArea').style.display = 'none';
          
          // Update status
          const statusBadge = document.getElementById('statusBadge');
          statusBadge.textContent = '‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ';
          statusBadge.className = 'status-badge status-cancelled';
        }, 1500);
      }
    }

    // Cancel button event
    document.getElementById('cancelBtn').addEventListener('click', cancelBooking);

    // Prevent context menu on long press
    document.addEventListener('contextmenu', function(e) {
      if (e.target.closest('.slide-button') || e.target.closest('.action-area')) {
        e.preventDefault();
      }
    });

    // Add haptic feedback for touch devices
    function vibrate(pattern = 50) {
      if ('vibrate' in navigator) {
        navigator.vibrate(pattern);
      }
    }

    // Add vibration feedback to slide interactions
    slideButton.addEventListener('touchstart', () => vibrate(10));
    slideContainer.addEventListener('transitionend', () => {
      if (slideContainer.classList.contains('slide-completed')) {
        vibrate([50, 100, 50]);
      }
    });
  </script>
</body>
</html>
